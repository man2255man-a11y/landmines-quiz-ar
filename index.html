
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ุตูุญุฉ ูุงุนููุฉ: ููุฎุต ุงููุชุงุจ + ุฃุณุฆูุฉ ุชูุงุนููุฉ</title>
  <style>
    :root{--bg:#0f172a;--panel:#111827;--muted:#cbd5e1;--text:#e5e7eb;--accent:#22c55e;--danger:#ef4444;--warn:#f59e0b;--link:#38bdf8}
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0b1022,#0e142a 35%,#0a1226);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Noto Sans Arabic","Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji";}
    a{color:var(--link);text-decoration:none}
    a:hover{text-decoration:underline}
    header{position:sticky;top:0;background:rgba(15,23,42,.82);backdrop-filter:blur(10px);border-bottom:1px solid #1f2937;z-index:50}
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    .title{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .badge{background:#1f2937;color:#93c5fd;padding:4px 10px;border-radius:999px;font-size:12px;border:1px solid #334155}
    .grid{display:grid;gap:16px;grid-template-columns:1fr}
    @media(min-width:900px){.grid{grid-template-columns:1.2fr .8fr}}
    .card{background:#0b1221;border:1px solid #1e293b;border-radius:14px;padding:16px}
    .card h2{margin:0 0 10px 0;font-size:20px}
    .card p{color:var(--muted);line-height:1.8}
    .muted{color:#94a3b8}
    .pill{display:inline-block;padding:6px 10px;background:#0f172a;border:1px solid #1f2937;border-radius:999px;margin:2px;color:#cbd5e1;font-size:12px}
    .btn{cursor:pointer;border:none;border-radius:10px;padding:10px 14px;background:linear-gradient(90deg,#16a34a,#22c55e);color:#031b0d;font-weight:700}
    .btn.secondary{background:#0f172a;color:#e5e7eb;border:1px solid #1f2937}
    .btn.warn{background:#0f172a;color:#fbbf24;border:1px solid #f59e0b}
    .btn:disabled{opacity:.5;cursor:not-allowed}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .list{display:grid;gap:10px}
    .q{padding:12px;border:1px solid #1f2937;border-radius:10px;background:#0b1529}
    .q h4{margin:0 0 8px 0}
    .options{display:grid;gap:8px}
    .opt{display:flex;gap:8px;align-items:flex-start;padding:10px;border-radius:10px;border:1px solid #1e293b;background:#0b1221;cursor:pointer}
    .opt input{margin-top:4px}
    .correct{border-color:#22c55e;background:#0c1e16}
    .wrong{border-color:#ef4444;background:#1a1012}
    .explain{font-size:14px;color:#cbd5e1;margin-top:6px}
    footer{margin:40px 0 60px;color:#94a3b8}
    .tag{display:inline-block;background:#0f172a;border:1px dashed #334155;color:#9ca3af;border-radius:8px;padding:4px 8px;font-size:12px}
    .small{font-size:12px;color:#93a0b4}
    .hr{height:1px;background:#1f2937;margin:14px 0}
    .input{background:#0f172a;color:#e5e7eb;border:1px solid #1f2937;border-radius:8px;padding:10px;width:100%}
    .select{background:#0f172a;color:#e5e7eb;border:1px solid #1f2937;border-radius:8px;padding:10px;width:100%}
    .scorebox{display:flex;gap:10px;flex-wrap:wrap}
    .scorebox .pill{background:#0f172a}
    details{border:1px solid #1f2937;border-radius:8px;padding:8px;background:#0b1221}
    summary{cursor:pointer}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;background:#0f172a;border:1px solid #1f2937;border-radius:6px;padding:2px 6px;color:#93c5fd}
  </style>
</head>
<body>
  <header>
    <div class="wrap title">
      <h1 style="margin:0;font-size:22px">๐ ุตูุญุฉ ูุงุนููุฉ: <span style="color:#86efac">ููุฎุต + ุงุฎุชุจุงุฑ</span></h1>
      <span class="badge">ูุนูู ุจุงููุงูู ุฏูู ุฅูุชุฑูุช</span>
      <span class="badge">RTL โข ุนุฑุจู</span>
    </div>
  </header>

  <main class="wrap grid">
    <section class="card">
      <h2>ุงูููุฑุฉ</h2>
      <p>ุตูุญุฉ ูุงุญุฏุฉ ุชุฌูุน ููุฎุตูุง ุณุฑูุนูุง ููู ูุตูุ ุซู ุงุฎุชุจุงุฑูุง ุชูุงุนูููุง ุจุฃุณุฆูุฉ ยซุตุญ/ุฎุทุฃยป ูยซุงุฎุชูุงุฑุงุช ูุชุนุฏุฏุฉยป. ุงูุฃุณุฆูุฉ ุชูุณุญุจ ุนุดูุงุฆููุง ูุชุชูุงุฏู ุงูุชูุฑุงุฑ ุนุจุฑ <span class="kbd">localStorage</span>. ููููู ุงูุทุจุงุนุฉ ุฃู ุงูุชุญููู ุฅูู PDFุ ุฃู ุฑูุน ุงูููู ููุง ูู ุฅูู ุฃู ุฎุฏูุฉ ุงุณุชุถุงูุฉ (GitHub Pages / Netlify) ููุนูู ูุฑุงุจุท.</p>
      <div class="row">
        <button class="btn" id="startQuiz">ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ</button>
        <button class="btn secondary" id="printBtn">ุทุจุงุนุฉ / PDF</button>
        <button class="btn warn" id="resetBtn" title="ุญุฐู ุงูุณุฌู ุงููุญูู ูุชูุฑุงุฑ ุงูุฃุณุฆูุฉ">ุฅุนุงุฏุฉ ุถุจุท ุงูุฃุณุฆูุฉ</button>
      </div>
      <div class="hr"></div>
      <div class="row">
        <label style="min-width:120px">ุงุฎุชุฑ ุงููุตู:</label>
        <select class="select" id="chapterSelect"></select>
        <label style="min-width:120px">ุนุฏุฏ ุงูุฃุณุฆูุฉ:</label>
        <input class="input" id="numQuestions" type="number" min="1" value="6" style="max-width:120px" />
      </div>
      <p class="small">ุชูููุญ: ููููู ูุชุญ <span class="kbd">ุชูุงุตูู ุงููุฑุงุฌุน</span> ุฃุณูู ูู ููุฎุต ููุงุทูุงุน ุนูู ุงููุตุงุฏุฑ.</p>
    </section>

    <aside class="card">
      <h2>ููุฎุตุงุช ุงููุตูู</h2>
      <div id="summaries" class="list"></div>
    </aside>

    <section class="card" style="grid-column:1/-1">
      <h2>ุงูุงุฎุชุจุงุฑ</h2>
      <div id="quizBox" class="list"></div>
      <div id="resultBox" class="card" style="display:none"></div>
    </section>

    <section class="card" style="grid-column:1/-1">
      <h2>ุทุฑููุฉ ุงููุดุฑ ูุฑุงุจุท</h2>
      <ol class="muted">
        <li>ุงูุชุญ <span class="kbd">github.com</span> &rarr; ุฃูุดุฆ ูุณุชูุฏุนูุง ุฌุฏูุฏูุง &rarr; ุงุฑูุน ูุฐุง ุงูููู ููุง ูู.</li>
        <li>ูู ุฅุนุฏุงุฏุงุช ุงููุณุชูุฏุน ูุนูู <b>GitHub Pages</b> ุนูู ูุฑุน <b>main</b> ูุงุจุฏุฃ ุงููุดุฑ. ุณุชุญุตู ุนูู ุฑุงุจุท ูุจุงุดุฑ.</li>
        <li>ุจุฏูู ุณุฑูุน: ุงุณุญุจ ุงูููู ุฅูู <b>netlify.app</b> (Drag &amp; Drop) ูุชุญุตู ุนูู ุฑุงุจุท ุฎูุงู ุซูุงูู.</li>
      </ol>
      <p class="small">ูู ุงููุญุชูู ุฐุงุชู ุงูุงูุชูุงุก (HTML/CSS/JS) ููุง ูุนุชูุฏ ุนูู ููุชุจุงุช ุฎุงุฑุฌูุฉ.</p>
    </section>

    <footer class="wrap">
      <p>ยฉ ุตูุญุฉ ุชุนููููุฉ ุชูุงุนููุฉ. ุชู ุฅุนุฏุงุฏ ุงููุญุชูู ุงูุชุนูููู ุงุนุชูุงุฏูุง ุนูู ุงูููุฑุณ ูุงูุฃูุณุงู ุงูุงูุชุชุงุญูุฉ ูู <i>Landmines and Unexploded Ordnance: A Resource Book (2000)</i> ูู Rae McGrath.</p>
    </footer>
  </main>

  <script>
    // โโโโโ ุจูุงูุงุช ุงููุตู ูุงูุณุคุงู โโโโโ
    const DATA = {
      chapters: [
        {
          id: "ch1",
          title: "1) ููุฏูุฉ ุฅูู ุงูุฃูุบุงู ูุงูุฐุฎุงุฆุฑ ุบูุฑ ุงููููุฌุฑุฉ",
          summary: "ูุนุฑุถ ุชุทููุฑ ุงูุฃูุบุงู ูู ุงูุญุฑุจ ุงูุนุงูููุฉ ุงูุฃููู ุฅูู ุงูุญุฑูุจ ุงูุญุฏูุซุฉุ ูููุตูู ุฎุตุงุฆุต ุงูุฃูุบุงู (ุงููุฌุงุฑูุฉ/ุดุธุงูุง/ูุงูุฒุฉ)ุ ูุขููุงุช ุงูุชูุนูู (ุถุบุท/ุณูู ุฌุฑ/ุชุญุฑุฑ ุถุบุท/ูุฑุจ)ุ ูุทุฑู ุงููุซุฑ (ูุฏูู/ุฌูู/ูุฐุงุฆู). ูุดุฑุญ ุงููุฑู ุจูู ุงูุฃูุบุงู ูุงูุฐุฎุงุฆุฑ ุบูุฑ ุงููููุฌุฑุฉ (UXO) ูุงูุฐุฎุงุฆุฑ ุงูุนูููุฏูุฉ ูุชุฃุซูุฑูุง ุทููู ุงูุฃูุฏ ุนูู ุงููุฌุชูุนุงุช.",
          references: [
            "ุงูููุฑุณ: ยซAn Introduction to Landmines and Unexploded Ordnanceยปุ ูุน ุฃูุณุงู ุงูุฎุตุงุฆุต ูุฃููุงุท ุงูุชูุนูู ูุงููุซุฑ.",
          ],
          questions: [
            {
              type: "tf",
              q: "ุงูุฃูุบุงู ุงููุงูุฒุฉ (Bounding) ุชุฑูุน ููุณูุง ุฅูู ุงุฑุชูุงุน ูุนูู ูุจู ุงูุงููุฌุงุฑ ููุดุฑ ุงูุดุธุงูุง ุนูู ูุทุงู ุฃูุณุน.",
              answer: true,
              explain: "ุงูููุฑุฉ ุงููุงูุฒุฉ ุชุฒูุฏ ูู ูุตู ุงููุชู ุจุงูุดุธุงูุง ููุงุฑูุฉ ุจุงูุงููุฌุงุฑ ุงูุฃุฑุถู.",
            },
            {
              type: "mcq",
              q: "ุฃู ูู ุงูุชุงูู ููุนุฏ ุขููุฉ ุชูุนูู ุดุงุฆุนุฉ ูู ุงูุฃูุบุงู ุงููุถุงุฏุฉ ููุฃูุฑุงุฏุ",
              options: ["ูุคูุช ููุท", "ุณูู ุฌุฑ (Tripwire)", "ุฅุดุงุฑุฉ GPS", "ุญุฑุงุฑุฉ ุงูุฌุณู"],
              answerIndex: 1,
              explain: "ุณูู ุงูุฌุฑ ุขููุฉ ููุงุณูููุฉ ุฅูู ุฌุงูุจ ุงูุถุบุท ูุชุญุฑุฑ ุงูุถุบุท ูุงููุฑุจ.",
            },
            {
              type: "tf",
              q: "ุงูุฐุฎุงุฆุฑ ุบูุฑ ุงููููุฌุฑุฉ (UXO) ูู ุฐุฎุงุฆุฑ ููุนูููุช ุฐุงุชููุง ุจุนุฏ ุงูุชูุงุก ุงููุชุงู ูุฐูู ูุง ุชุดููู ุฎุทุฑูุง.",
              answer: false,
              explain: "UXO ุชุจูู ุฎุทุฑุฉ ูุฃููุง ูุดูุช ูู ุงูุงููุฌุงุฑ ุนูุฏ ุงูุงุณุชุฎุฏุงู ูุชุธู ูุงุจูุฉ ููุงููุฌุงุฑ ูุงุญููุง.",
            },
            {
              type: "mcq",
              q: "ููุชูู ูุตุทูุญ ยซุงูุฐุฎุงุฆุฑ ุงูุนูููุฏูุฉยป ุฅูู:",
              options: ["ููุน ูู ุงูุฃูุบุงู ุงูุจุญุฑูุฉ", "ุฐุฎุงุฆุฑ ุชููุซุฑ ุญูููุงุช ูุฑุนูุฉ ูุฏ ุชุชุตุฑู ูุฃูุบุงู", "ุฏุฑููุงุช ุงุณุชุทูุงุน", "ูุฐุงุฆู ุฏุฎุงููุฉ"],
              answerIndex: 1,
              explain: "ุจุนุถ ุงูุญูููุฉ ุงููุฑุนูุฉ ูุฏ ุชุชุญูู ุนููููุง ุฅูู ุฃูุบุงู ุจูุนู ุงููุดู ูู ุงูุงููุฌุงุฑ.",
            }
          ]
        },
        {
          id: "ch2",
          title: "2) ุงูุฃุซุฑ ุจุนุฏ ุงููุฒุงุน",
          summary: "ูุชูุงูู ุงูุฃุซุฑ ุงููุจุงุดุฑ ุนูู ุฌุณู ุงูุฅูุณุงู ูุฃููุงุท ุงูุฅุตุงุจุฉุ ูุงููุฆุงุช ุงูุฃุดุฏ ูุดุงุดุฉ (ุงูุฃุทูุงูุ ุงูุฑุนุงุฉุ ุงูุนุงุฆุฏูู)ุ ูุจูุนุฏ ุงูุซูุฉ ุงููุฌุชูุนูุฉ ูุงูุซูุงูู. ููุง ููุงูุด ุงูุฃุซุฑ ุบูุฑ ุงููุจุงุดุฑ ุนูู ุงูุฎุฏูุงุช ุงูุตุญูุฉ ูุงูููู ูุงูุชุฌุงุฑุฉ ูุนูู ูุณุงุฑ ุงูุชูููุฉ.",
          references: [
            "ุงูููุฑุณ: ยซPost-conflict Impactยป ุจุฃูุณุงู: ุงูุฌุณู ุงูุจุดุฑูุ ุงููุดุงุดุฉุ ุงูุซูุฉุ ุงูุซูุงูุฉุ ุงูุชุฃุซูุฑุงุช ุบูุฑ ุงููุจุงุดุฑุฉ (ุงูุตุญุฉ/ุงูููู/ุงูุชูููุฉ).",
          ],
          questions: [
            { type: "tf", q: "ุงูุฃุทูุงู ุบุงูุจูุง ุถูู ุงููุฆุงุช ุงูุฃูุซุฑ ุชุนุฑุถูุง ูุฎุทุฑ ุงูุฃูุบุงู ุจุณุจุจ ุงูุณููู ุงูุงุณุชูุดุงูู ูุงููุนุจ.", answer: true, explain: "ุงููุนุจ ูุงููุถูู ูููุฉ ุงููุนู ุชุฒูุฏ ุงููุฎุงุทุฑ."},
            { type: "mcq", q: "ุฃู ููุง ููู ููุนุฏ ุฃุซุฑูุง ุบูุฑ ูุจุงุดุฑ ููุฃูุบุงูุ", options: ["ุจุชุฑ ุงูุฃุทุฑุงู ููุฑ ุงูุงููุฌุงุฑ", "ูุฒูู ุญุงุฏ", "ุชุนุทูู ุณูุงุณู ุงูุฅูุฏุงุฏ ูุงูููู", "ุญุฑูู ูุจุงุดุฑุฉ"], answerIndex: 2, explain: "ุชุนุทูู ุงูููู ูุงูุชุฌุงุฑุฉ ูุงูุฎุฏูุงุช ูู ุงูุขุซุงุฑ ุบูุฑ ุงููุจุงุดุฑุฉ."},
            { type: "tf", q: "ููุฏุงู ุงูุซูุฉ ุงููุฌุชูุนูุฉ ูู ุงูุฃุฑุถ ูุงูุทุฑู ููู ุจุนุฏ ุฅุฒุงูุฉ ุนูุงูุงุช ุงูุชุญุฐูุฑ.", answer: false, explain: "ุงูุนูุณุ ุบูุงุจ ุงูุชุญุฐูุฑ ูุน ุงุณุชูุฑุงุฑ ุงูุฎุทุฑ ููุงูู ููุฏุงู ุงูุซูุฉ."},
            { type: "mcq", q: "ุฃู ูุฑูู ูุชุฃุซุฑ ุทููููุง ุจุงูุฃูุบุงู ูุฃุซุฑ ุบูุฑ ูุจุงุดุฑุ", options:["ุงููุชุงุญู","ุงูุญุฏุงุฆู","ุงููุทุงุน ุงูุตุญู","ุงูููุงุนุจ"], answerIndex:2, explain:"ุงุฑุชูุงุน ุงูุถุบุท ุนูู ุงููุทุงุน ุงูุตุญู ูุฅุนุงุฏุฉ ุงูุชุฃููู."}
          ]
        },
        {
          id: "ch3",
          title: "3) ุนูููุฉ ุงููุณุญ (Survey)",
          summary: "ูุดุฑุญ ุงูููุทู ุฎูู ุงููุณุญุ ููุณุชููุงุช ุงูุชูููู: ุงููุณุชูู ุงูุฃูู (ุชูุฏูุฑ ุงูุฃุซุฑ ุนูู ุงููุฌุชูุน ุนุจุฑ ุงุณุชุจูุงูุงุช ูููุงุจูุงุช)ุ ูุงููุณุชูู ุงูุซุงูู (ูุณุญ ููู/ุนูููุงุชู ุฃุฏู). ููุถุญ ุฏูุฑ ุงูุฎุฑุงุฆุท ูุงูุชุนููู ุงููุฌุชูุนู ูุชุญุฏูุฏ ุงูุฃููููุงุช ูุฅุนุฏุงุฏ ุงูุชูุงุฑูุฑ.",
          references: [
            "ุงูููุฑุณ: ยซThe Survey Processยป ุจูุง ูู ุฐูู Level One/Twoุ ุงูุฎุฑุงุฆุทุ ุงูุชุนููู ุงููุฌุชูุนูุ ุชุญุฏูุฏ ุงูุฃููููุงุช.",
          ],
          questions: [
            { type:"mcq", q:"ุงููุฏู ุงูุฑุฆูุณ ูู ูุณุญ ุงููุณุชูู ุงูุฃูู ูู:", options:["ุฅุฒุงูุฉ ุงูุฃูุบุงู ููุฑูุง","ุชูููู ุงูุฃุซุฑ ูุชุญุฏูุฏ ุงูุฃููููุงุช","ุชุฏุฑูุจ ุงูููุงุจ","ุงุฎุชุจุงุฑ ูุนุฏุงุช ูุดู ุฌุฏูุฏุฉ"], answerIndex:1, explain:"Level One ูุชูุฏูุฑ ุงูุฃุซุฑ ูุจูุงุก ุตูุฑุฉ ุฃูููุฉ ูุจู ุงูุชุฏุฎู."},
            { type:"tf", q:"ุงููุณุชูู ุงูุซุงูู ูุฑูุฒ ุนูู ุชูุซูู ููู ุฃุฏู ููููุงุทู ุงูุฎุทุฑุฉ ูุชุฎุทูุท ุงูุนูููุงุช.", answer:true, explain:"Level Two ุชูุตููู ูุฏุนู ุงูุชุฎุทูุท ุงูููุฏุงูู."},
            { type:"mcq", q:"ุฃู ุฃุฏุงุฉ ุดุงุฆุนุฉ ูู ุงููุณุญ ูุฑุณู ุงูุฎุฑุงุฆุทุ", options:["GPS","ูููุฑูุณููุจ","ุณููุงุฑ ุจุญุฑู","ุฑุงุณู ุชุฎุทูุท ููุจ"], answerIndex:0, explain:"ุฃูุธูุฉ ุชุญุฏูุฏ ุงูููุงูุน ุฃุณุงุณูุฉ ููุชูุซูู."},
            { type:"tf", q:"ุชุญุฏูุฏ ุงูุฃููููุงุช ูุนุชูุฏ ููุท ุนูู ุณูููุฉ ุงููุตููุ ุฏูู ุงููุธุฑ ุฅูู ุงูุฃุซุฑ ุนูู ุณุจู ุงูุนูุด.", answer:false, explain:"ุงูุฃุซุฑ ุนูู ุงููุฌุชูุน ูุณุจู ุงูุนูุด ุนุงูู ุญุงุณู ูู ุงูุฌุฏููุฉ."}
          ]
        },
        {
          id:"ch4a",
          title:"4.1) ุฅุฒุงูุฉ ุงูุฃูุบุงู ูุงูุฐุฎุงุฆุฑ ุบูุฑ ุงููููุฌุฑุฉ (ุนูููุงุช)",
          summary:"ูุนุฑุถ ุฃุณุงููุจ ุงูุฅุฒุงูุฉ: ุงูุนูู ุงููุฏูู ูุงููููุจ ุงูุฅููุชุฑููู ูุงูุนุตุง ุงููุฑุฌุนูุฉุ ุฅุฏุงุฑุฉ ุงูููุฏุงู ูุงููุณุงูุงุช ุงูุขููุฉุ ุฃุฏูุงุช ุงูุญูุงูุฉุ ุงููุฌุณุงุชุ ุงูููููุฉุ ูุงูููุงุจ. ููุง ูุชูุงูู ุชูููู/ุงุฎุชุฒุงู ูุณุงุญุฉ ุงูุญููุ ุงูุชุนูููุงุช ุงูุชุฑููุฒูุฉุ ูุชุทููุฑ ููุงุทู ุงููุชุงู (BAC).",
          references:[
            "ุงูููุฑุณ: ยซPhysical eradicationโฆ Manual, Electronic, Mechanisation, Dogs, Reduction, Marking, BAC, QA, Incidentsยป.",
          ],
          questions:[
            { type:"mcq", q:"ุฃู ุฃุณููุจ ููุณุชุฎุฏู ูุชุณุฑูุน ุงูุนูู ูู ุงูุชุฑุจุฉ ุงูููุงุณุจุฉ ูุน ุจูุงุก ุถุฑูุฑุฉ ุงูุชุญูู ุงูุจุดุฑูุ", options:["ุงูููููุฉ","ุฃุดุนุฉ X","ุทุงุฆุฑุงุช ุจุฏูู ุทูุงุฑ ูุณูุญุฉ","ูุบูุงุทูุณ ุฃุฑุถู ุถุฎู"], answerIndex:0, explain:"ุงูููููุฉ ุชุฏุนู ููููุง ูุง ุชูุบูู ุนู ุงูุชุญูู/QA."},
            { type:"tf", q:"ุฅุฏุงุฑุฉ ุงููุณุงูุงุช ุงูุขููุฉ ูุชุฑุณูู ุงูููุฏุงู ุนูุตุฑ ุฃุณุงุณู ูู ุงูุณูุงูุฉ.", answer:true, explain:"ูุชูููู ุงููุฎุงุทุฑ ุนูู ุงูุทูุงูู."},
            { type:"mcq", q:"BAC ุชุดูุฑ ุฅูู:", options:["ุชุทููุฑ ููุทูุฉ ุงููุนุฑูุฉ","ุงุฎุชุจุงุฑ ูุจูู ุจุงูุฒ", "ุดูุงุฏุฉ ูุทุงุจูุฉ", "ููุงุฉ ุฐุงุช ูุทุงู ุนุฑูุถ"], answerIndex:0, explain:"Battle Area Clearance."},
            { type:"tf", q:"ุงูููุงุจ ูููู ุฃู ุชูุณุชุฎุฏู ูููุดูุ ููููุง ุชุญุชุงุฌ ุจุฑูุชููููุงุช ุฌูุฏุฉ ุตุงุฑูุฉ.", answer:true, explain:"ุชูุญุณูู ุงูุฅูุชุงุฌูุฉ ุถูู ููุธููุฉ QA."}
          ]
        },
        {
          id:"ch4b",
          title:"4.2) ุงูููุงูู ุงููุณุชุฏุงูุฉ ูุจุฑุงูุฌ ูุฒุน ุงูุฃูุบุงู ุงููุทููุฉ",
          summary:"ููุงูุด ุงูููุงุฐุฌ ุงูุฅุฏุงุฑูุฉ ูุตูุน ุงููุฑุงุฑุ ูุงูุญูููููุฉ ูุงูุฑูุงุจุฉ ูุงูุดูุงููุฉุ ูุณูุจู ุงูุงุณุชุฏุงูุฉ: ุชูุธูููุฉ ููููููุฉ ูุจุดุฑูุฉ ูุชูููุฉ.",
          references:[
            "ุงูููุฑุณ: ยซSustainable Management Structuresโฆ Decision-making, Oversight, Sustainability (org/structural/manpower/technology)ยป.",
          ],
          questions:[
            { type:"tf", q:"ุงูุงุณุชุฏุงูุฉ ุงูุชูููุฉ ุชุนูู ุงุฎุชูุงุฑ ุชูููุงุช ูููู ุชุดุบูููุง ูุตูุงูุชูุง ูุญูููุง ุนูู ุงููุฏู ุงูุทููู.", answer:true, explain:"ุชุฌููุจ ุญููู ูุง ูููู ุฏุนููุง ูุญูููุง."},
            { type:"mcq", q:"ุฃู ุนูุตุฑ ููุณ ูู ุนูุงุตุฑ ุงูุงุณุชุฏุงูุฉ ุงููุฐููุฑุฉ ุนุงุฏุฉูุ", options:["ุชูุธูููุฉ","ูููููุฉ","ููุณููุฉ","ุจุดุฑูุฉ"], answerIndex:2, explain:"ุงููุฐููุฑ ุนุงุฏุฉ: ุชูุธูููุฉ/ูููููุฉ/ุจุดุฑูุฉ/ุชูููุฉ."},
            { type:"tf", q:"ุงูุฑูุงุจุฉ ุงููุทููุฉ ูุงูุดูุงููุฉ ุชุณุงุนุฏุงู ูู ุฑูุน ุงูุซูุฉ ูุงูุชูููู.", answer:true, explain:"ุชุญุณู ุงููุจูู ุงูุนุงู ูุงูุฏุนู ุงูุฏููู."},
            { type:"mcq", q:"ูุฑุงุฑ ุฌุฏููุฉ ุงูุฃููููุงุช ูุฌุจ ุฃู ูุณุชูุฏ ุฅูู:", options:["ุงุนุชุจุงุฑุงุช ุณูุงุณูุฉ ููุท","ุงุนุชุจุงุฑุงุช ุฃูููุฉ ููุท","ูุตูููุฉ ุฃุซุฑ/ูุฎุงุทุฑ/ุฌุงูุฒูุฉ ุชูููุฐ","ุงููุฑุจ ูู ุงูุนุงุตูุฉ"], answerIndex:2, explain:"ููุฌ ูุชูุงุฒู ูุงุฆู ุนูู ุจูุงูุงุช."}
          ]
        },
        {
          id:"ch5",
          title:"5) ุงูุงุณุชุฌุงุจุฉ ูุงุญุชูุงุฌุงุช ุงููุฌุชูุนุงุช ุงููุชุฃุซุฑุฉ",
          summary:"ูุฑูุฒ ุนูู ุฑุนุงูุฉ ุงูุถุญุงูุงุ ูุชุตููู ุงูุชูุนูุฉ ุจุงููุฎุงุทุฑ ุงููุชูููุฉ ูุน ุงูุณูุงู (ุนุฏู ุชุนููู ุฑุณุงุฆู ุนุงูููุฉ ุนูู ูุดููุงุช ูุญููุฉ)ุ ูุฑู ุงูุนูู ุงููุฌุชูุนูุฉุ ุฏุนู ุงููุงุฒุญูู ูุงูุฑุญูุ ูุงูุฅุณุนุงูุงุช ุงูุฃูููุฉ ูุฅุนุงุฏุฉ ุงูุฅุฏูุงุฌ ุงูุงูุชุตุงุฏู/ุงูุงุฌุชูุงุนู.",
          references:[
            "ุงูููุฑุณ: ยซMine victims, Mine awareness pitfalls, Proven approaches, IDPs/Nomads, First-aid model, Livelihoodsยป.",
          ],
          questions:[
            { type:"tf", q:"ุงูุชูุนูุฉ ุจุงููุฎุงุทุฑ ุงููุนุงูุฉ ูุฌุจ ุฃู ุชูุตูููู ูุญูููุง ููู ุณููููุงุช ููุฎุงุทุฑ ุงููุฌุชูุน.", answer:true, explain:"ุฅูุง ุชุญููุช ุฅูู ุฑุณุงุฆู ุบูุฑ ูุนูุงูุฉ."},
            { type:"mcq", q:"ูู ุฃูุซูุฉ ุงูููุงุฑุจุงุช ุงููุซุจุชุฉ:", options:["ูุณุฎ ููุดูุฑุงุช ุนุงูุฉ ุนุงูููุฉ","ูุฑู ุนูู ูุญููุฉ ุชุดุงุฑููุฉ","ุงูุงูุชูุงุก ุจุงููุงูุชุงุช","ุญููุงุช ุฅููุชุฑูููุฉ ููุท"], answerIndex:1, explain:"ุงูููุฌ ุงูุชุดุงุฑูู ูุฒูุฏ ุงููุงุนููุฉ."},
            { type:"mcq", q:"ุฃู ุนูุตุฑ ุฌููุฑู ูู ุงุณุชุฌุงุจุฉ ุงูุถุญุงูุงุ", options:["ุงูููู ุงูุงุฌุชูุงุนู","ุงูุชุฃููู ุงูุทุจู ูุงูุฃุทุฑุงู ุงูุตูุงุนูุฉ ูุงูุฏุนู ุงูููุณู ูุงูุงูุชุตุงุฏู","ุงูุชุฌุงูู","ุฅุนุงุฏุฉ ุงูุชูุทูู ุงููุณุฑู ุฏุงุฆููุง"], answerIndex:1, explain:"ุงุณุชุฌุงุจุฉ ูุชุนุฏุฏุฉ ุงูุฃุจุนุงุฏ."},
            { type:"tf", q:"ุจุฑุงูุฌ ุฅุณุนุงูุงุช ุฃูููุฉ ูุตูุฑุฉ ูููููุง ุฎูุถ ุงููููุงุช ุฅุฐุง ุตูููุช ูุงูุนููุง ูุชูุช ูุฑุงุฌุนุชูุง ุฏูุฑููุง.", answer:true, explain:"ุงููุฑุงุฌุนุฉ ุจุนุฏ ุฃุดูุฑ ุชุญุณูู ุงูุจุฑูุชููููุงุช."}
          ]
        }
      ]
    };

    // โโโโโ ูุงุฌูุฉ ุงูููุฎุตุงุช โโโโโ
    const summariesEl = document.getElementById('summaries');
    const chapterSelect = document.getElementById('chapterSelect');
    const numQuestions = document.getElementById('numQuestions');
    const quizBox = document.getElementById('quizBox');
    const resultBox = document.getElementById('resultBox');

    // ุชุนุจุฆุฉ ุงูููุงุฆู
    DATA.chapters.forEach(ch => {
      // ุฎูุงุฑ ูู ุงููุงุฆูุฉ
      const opt = document.createElement('option');
      opt.value = ch.id;
      opt.textContent = ch.title;
      chapterSelect.appendChild(opt);
      // ุจุทุงูุฉ ููุฎุต
      const details = document.createElement('details');
      const summary = document.createElement('summary');
      summary.innerHTML = `<b>${ch.title}</b>`;
      const p = document.createElement('p');
      p.textContent = ch.summary;
      const refs = document.createElement('div');
      refs.className = 'small';
      refs.innerHTML = '<div class="hr"></div><b>ูุฑุงุฌุน:</b><ul>'+ch.references.map(r=>`<li>${r}</li>`).join('')+'</ul>';
      details.appendChild(summary);
      details.appendChild(p);
      details.appendChild(refs);
      summariesEl.appendChild(details);
    });

    // โโโโโ ููุทู ุงูุงุฎุชุจุงุฑ โโโโโ
    function shuffle(arr){return arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(v=>v[1])}
    function pickWithoutRepeats(all, count, chapterId){
      const key = 'asked_'+chapterId;
      const asked = JSON.parse(localStorage.getItem(key) || '[]');
      const pool = all.filter((_,i)=>!asked.includes(i));
      let chosen = [];
      if(pool.length >= count){
        const idxs = shuffle([...pool.keys()]).slice(0, count).map(k=>all.indexOf(pool[k]));
        chosen = idxs;
      }else{
        // ุฎุฐ ูุง ุชุจูู ุซู ุฃุนุฏ ุงูุถุจุท ูุจุงูู ุงูุฃุณุฆูุฉ
        const remainingIdxs = pool.map(item => all.indexOf(item));
        const stillNeed = count - remainingIdxs.length;
        const allIdxs = [...Array(all.length).keys()];
        const refill = shuffle(allIdxs).filter(i=>!remainingIdxs.includes(i)).slice(0, stillNeed);
        chosen = remainingIdxs.concat(refill);
        localStorage.setItem(key, JSON.stringify([]));
      }
      // ุณุฌูู ุงููุฎุชุงุฑ
      const newAsked = JSON.parse(localStorage.getItem(key) || '[]').concat(chosen);
      localStorage.setItem(key, JSON.stringify([...new Set(newAsked)]));
      return chosen.map(i=>({idx:i, data:all[i]}));
    }

    function renderQuiz(chapterId, count){
      quizBox.innerHTML='';
      resultBox.style.display='none';
      const ch = DATA.chapters.find(c=>c.id===chapterId) || DATA.chapters[0];
      const picked = pickWithoutRepeats(ch.questions, count, ch.id);

      let score = 0;
      let answered = 0;
      const answersReview = [];

      picked.forEach((entry, qi)=>{
        const qwrap = document.createElement('div');
        qwrap.className = 'q';
        const qh = document.createElement('h4');
        qh.textContent = `ุณ${qi+1}: ${entry.data.q}`;
        const ops = document.createElement('div');
        ops.className = 'options';

        if(entry.data.type==='tf'){
          ['ุตุญ','ุฎุทุฃ'].forEach((label, oi)=>{
            const opt = document.createElement('label'); opt.className='opt';
            const input = document.createElement('input'); input.type='radio'; input.name='q'+qi; input.value = (label==='ุตุญ');
            const span = document.createElement('span'); span.textContent = label;
            opt.appendChild(input); opt.appendChild(span);
            ops.appendChild(opt);
          });
        } else {
          const shuffled = shuffle(entry.data.options.map((t,i)=>({t,i})));
          shuffled.forEach(({t,i})=>{
            const opt = document.createElement('label'); opt.className='opt';
            const input = document.createElement('input'); input.type='radio'; input.name='q'+qi; input.value=i;
            const span = document.createElement('span'); span.textContent = t;
            opt.appendChild(input); opt.appendChild(span);
            ops.appendChild(opt);
          });
        }

        const explain = document.createElement('div'); explain.className='explain'; explain.style.display='none';
        const submit = document.createElement('button'); submit.className='btn secondary'; submit.textContent='ุชุญูู ูู ุงูุฅุฌุงุจุฉ';

        submit.addEventListener('click', ()=>{
          const selected = qwrap.querySelector('input[type="radio"]:checked');
          if(!selected){ alert('ุงุฎุชุฑ ุฅุฌุงุจุฉ ุฃูููุง'); return; }
          // ูุงุฑู
          let correct = false;
          if(entry.data.type==='tf'){
            correct = (String(entry.data.answer) === String(selected.value==='true'));
          }else{
            correct = (Number(selected.value) === Number(entry.data.answerIndex));
          }
          // ุชูููู ุงูุฎูุงุฑุงุช
          qwrap.querySelectorAll('label.opt').forEach(lab=>lab.classList.remove('correct','wrong'));
          if(correct){
            selected.parentElement.classList.add('correct');
            score++;
          }else{
            selected.parentElement.classList.add('wrong');
            // ูู MCQุ ุนููู ุงูุตุญูุญุฉ
            if(entry.data.type==='mcq'){
              const correctInput = Array.from(qwrap.querySelectorAll('input')).find(inp=>Number(inp.value)===Number(entry.data.answerIndex));
              if(correctInput) correctInput.parentElement.classList.add('correct');
            }
          }
          explain.style.display='block';
          explain.textContent = 'ุงูุดุฑุญ: ' + (entry.data.explain || 'โ');
          submit.disabled = true;
          answered++;
          answersReview.push({q: entry.data.q, correct, explain: entry.data.explain || '', type: entry.data.type});
          if(answered === picked.length){
            showResult();
          }
        });

        qwrap.appendChild(qh);
        qwrap.appendChild(ops);
        qwrap.appendChild(explain);
        qwrap.appendChild(document.createElement('div')).className='hr';
        qwrap.appendChild(submit);
        quizBox.appendChild(qwrap);
      });

      function showResult(){
        resultBox.style.display='block';
        const pct = Math.round((score / picked.length)*100);
        resultBox.innerHTML = `
          <h3>ุงููุชูุฌุฉ</h3>
          <div class="scorebox">
            <span class="pill">ุงูุตุญูุญ: ${score}</span>
            <span class="pill">ุงูุฅุฌูุงูู: ${picked.length}</span>
            <span class="pill">ุงููุณุจุฉ: ${pct}%</span>
          </div>
          <div class="hr"></div>
          <details open><summary>ูุฑุงุฌุนุฉ ุงูุฅุฌุงุจุงุช</summary>
            <ol>
              ${answersReview.map(r=>`<li>${r.q}<br><span class="small">${r.correct? 'โ ุตุญูุญ' : 'โ ุฎุทุฃ'}</span><br><span class="small">${r.explain}</span></li>`).join('')}
            </ol>
          </details>
        `;
      }
    }

    document.getElementById('startQuiz').addEventListener('click', ()=>{
      const chapterId = chapterSelect.value || DATA.chapters[0].id;
      const count = Math.max(1, Math.min(parseInt(numQuestions.value||'6',10), 20));
      renderQuiz(chapterId, count);
      window.scrollTo({top: document.body.scrollHeight, behavior:'smooth'});
    });

    document.getElementById('resetBtn').addEventListener('click', ()=>{
      if(confirm('ุณูุชู ูุณุญ ุณุฌู ุงูุฃุณุฆูุฉ ูุชูุฑุงุฑูุง ูู ุฌุฏูุฏ. ูุชุงุจุนุฉุ')){
        DATA.chapters.forEach(ch=>localStorage.removeItem('asked_'+ch.id));
        alert('ุชูุช ุฅุนุงุฏุฉ ุงูุถุจุท.');
      }
    });

    document.getElementById('printBtn').addEventListener('click', ()=>window.print());

    // ุชุนุจุฆุฉ ุงูุชุฑุงุถูุฉ
    chapterSelect.value = DATA.chapters[0].id;
  </script>
</body>
</html>
