
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Interactive Page: Summaries + Quizzes (AR/EN)</title>
  <style>
    :root{--bg:#0f172a;--panel:#111827;--muted:#cbd5e1;--text:#e5e7eb;--accent:#22c55e;--danger:#ef4444;--warn:#f59e0b;--link:#38bdf8}
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0b1022,#0e142a 35%,#0a1226);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Noto Sans Arabic","Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji";}
    a{color:var(--link);text-decoration:none}
    a:hover{text-decoration:underline}
    header{position:sticky;top:0;background:rgba(15,23,42,.82);backdrop-filter:blur(10px);border-bottom:1px solid #1f2937;z-index:50}
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    .title{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .badge{background:#1f2937;color:#93c5fd;padding:4px 10px;border-radius:999px;font-size:12px;border:1px solid #334155}
    .grid{display:grid;gap:16px;grid-template-columns:1fr}
    @media(min-width:900px){.grid{grid-template-columns:1.2fr .8fr}}
    .card{background:#0b1221;border:1px solid #1e293b;border-radius:14px;padding:16px}
    .card h2{margin:0 0 10px 0;font-size:20px}
    .card p{color:var(--muted);line-height:1.8}
    .muted{color:#94a3b8}
    .pill{display:inline-block;padding:6px 10px;background:#0f172a;border:1px solid #1f2937;border-radius:999px;margin:2px;color:#cbd5e1;font-size:12px}
    .btn{cursor:pointer;border:none;border-radius:10px;padding:10px 14px;background:linear-gradient(90deg,#16a34a,#22c55e);color:#031b0d;font-weight:700}
    .btn.secondary{background:#0f172a;color:#e5e7eb;border:1px solid #1f2937}
    .btn.warn{background:#0f172a;color:#fbbf24;border:1px solid #f59e0b}
    .btn:disabled{opacity:.5;cursor:not-allowed}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .list{display:grid;gap:10px}
    .q{padding:12px;border:1px solid #1f2937;border-radius:10px;background:#0b1529}
    .q h4{margin:0 0 8px 0}
    .options{display:grid;gap:8px}
    .opt{display:flex;gap:8px;align-items:flex-start;padding:10px;border-radius:10px;border:1px solid #1e293b;background:#0b1221;cursor:pointer}
    .opt input{margin-top:4px}
    .correct{border-color:#22c55e;background:#0c1e16}
    .wrong{border-color:#ef4444;background:#1a1012}
    .explain{font-size:14px;color:#cbd5e1;margin-top:6px}
    footer{margin:40px 0 60px;color:#94a3b8}
    .tag{display:inline-block;background:#0f172a;border:1px dashed #334155;color:#9ca3af;border-radius:8px;padding:4px 8px;font-size:12px}
    .small{font-size:12px;color:#93a0b4}
    .hr{height:1px;background:#1f2937;margin:14px 0}
    .input{background:#0f172a;color:#e5e7eb;border:1px solid #1f2937;border-radius:8px;padding:10px;width:100%}
    .select{background:#0f172a;color:#e5e7eb;border:1px solid #1f2937;border-radius:8px;padding:10px;width:100%}
    .scorebox{display:flex;gap:10px;flex-wrap:wrap}
    .scorebox .pill{background:#0f172a}
    details{border:1px solid #1f2937;border-radius:8px;padding:8px;background:#0b1221}
    summary{cursor:pointer}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;background:#0f172a;border:1px solid #1f2937;border-radius:6px;padding:2px 6px;color:#93c5fd}
    .lang{margin-inline-start:auto}
  </style>
</head>
<body>
  <header>
    <div class="wrap title">
      <h1 style="margin:0;font-size:22px">ğŸ“˜ Interactive Page: <span style="color:#86efac">AR / EN</span></h1>
      <span class="badge" id="modeBadge">Arabic â€¢ RTL</span>
      <select class="select lang" id="langSwitch" style="max-width:180px">
        <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© (AR)</option>
        <option value="en">English (EN)</option>
      </select>
    </div>
  </header>

  <main class="wrap grid">
    <section class="card">
      <h2 id="ideaTitle">Ø§Ù„ÙÙƒØ±Ø©</h2>
      <p id="ideaText">ØµÙØ­Ø© ÙˆØ§Ø­Ø¯Ø© ØªØ¬Ù…Ø¹ Ù…Ù„Ø®ØµÙ‹Ø§ Ø³Ø±ÙŠØ¹Ù‹Ø§ Ù„ÙƒÙ„ ÙØµÙ„ + Ø§Ø®ØªØ¨Ø§Ø± ØªÙØ§Ø¹Ù„ÙŠ. ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©ØŒ ÙˆØ§Ù„Ø£Ø³Ø¦Ù„Ø© ØªÙØ³Ø­Ø¨ Ø¹Ø´ÙˆØ§Ø¦ÙŠÙ‹Ø§ ÙˆØªØªÙØ§Ø¯Ù‰ Ø§Ù„ØªÙƒØ±Ø§Ø± Ø¹Ø¨Ø± <span class="kbd">localStorage</span>. Ø§Ø¹Ø±Ø¶Ù‡Ø§ ÙƒØ±Ø§Ø¨Ø· Ø¹Ø¨Ø± GitHub Pages.</p>
      <div class="row">
        <button class="btn" id="startQuiz">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>
        <button class="btn secondary" id="printBtn">Ø·Ø¨Ø§Ø¹Ø© / PDF</button>
        <button class="btn warn" id="resetBtn" title="Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„ Ø§Ù„Ù…Ø­Ù„ÙŠ Ù„ØªÙƒØ±Ø§Ø± Ø§Ù„Ø£Ø³Ø¦Ù„Ø©">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</button>
      </div>
      <div class="hr"></div>
      <div class="row">
        <label style="min-width:120px" id="pickChapterLabel">Ø§Ø®ØªØ± Ø§Ù„ÙØµÙ„:</label>
        <select class="select" id="chapterSelect"></select>
        <label style="min-width:120px" id="numQLabel">Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©:</label>
        <input class="input" id="numQuestions" type="number" min="1" value="8" style="max-width:120px" />
      </div>
      <p class="small" id="hintText">ØªÙ„Ù…ÙŠØ­: Ø§Ø³ØªØ®Ø¯Ù… <span class="kbd">ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹</span> Ø£Ø³ÙÙ„ ÙƒÙ„ Ù…Ù„Ø®Øµ.</p>
    </section>

    <aside class="card">
      <h2 id="summaryTitle">Ù…Ù„Ø®ØµØ§Øª Ø§Ù„ÙØµÙˆÙ„</h2>
      <div id="summaries" class="list"></div>
    </aside>

    <section class="card" style="grid-column:1/-1">
      <h2 id="quizTitle">Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</h2>
      <div id="quizBox" class="list"></div>
      <div id="resultBox" class="card" style="display:none"></div>
    </section>

    <section class="card" style="grid-column:1/-1">
      <h2 id="publishTitle">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù†Ø´Ø± ÙƒØ±Ø§Ø¨Ø·</h2>
      <ol class="muted" id="publishList">
        <li>GitHub Pages: Ø§Ø±ÙØ¹ <span class="kbd">index.html</span> Ø«Ù… ÙØ¹Ù‘Ù„ Pages Ù…Ù† Settings &rarr; Pages.</li>
        <li>Netlify: Ø§Ø³Ø­Ø¨ Ø§Ù„Ù…Ù„Ù Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø±Ø§Ø¨Ø· ÙÙˆØ±ÙŠ.</li>
      </ol>
      <p class="small" id="footNote">ÙƒÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø°Ø§ØªÙŠ Ø§Ù„Ø§ÙƒØªÙØ§Ø¡ (HTML/CSS/JS) ÙˆÙ„Ø§ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù…ÙƒØªØ¨Ø§Øª Ø®Ø§Ø±Ø¬ÙŠØ©.</p>
    </section>

    <footer class="wrap">
      <p id="creditLine">Â© ØµÙØ­Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© ØªÙØ§Ø¹Ù„ÙŠØ©. Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙØµÙˆÙ„ Ù…Ø¨Ù†ÙŠ Ø¹Ù„Ù‰ ÙÙ‡Ø±Ø³ ÙˆÙÙ‚Ø±Ø§Øª Ù…Ù†: Rae McGrath (2000).</p>
    </footer>
  </main>

  <script>
    // â€”â€”â€”â€”â€” Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ø§Ù„Ù„ØºØªÙŠÙ† â€”â€”â€”â€”â€”
    const DATA_AR = {
      ui: {
        ideaTitle: "Ø§Ù„ÙÙƒØ±Ø©",
        ideaText: "ØµÙØ­Ø© ÙˆØ§Ø­Ø¯Ø© ØªØ¬Ù…Ø¹ Ù…Ù„Ø®ØµÙ‹Ø§ Ø³Ø±ÙŠØ¹Ù‹Ø§ Ù„ÙƒÙ„ ÙØµÙ„ + Ø§Ø®ØªØ¨Ø§Ø± ØªÙØ§Ø¹Ù„ÙŠ. ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©ØŒ ÙˆØ§Ù„Ø£Ø³Ø¦Ù„Ø© ØªÙØ³Ø­Ø¨ Ø¹Ø´ÙˆØ§Ø¦ÙŠÙ‹Ø§ ÙˆØªØªÙØ§Ø¯Ù‰ Ø§Ù„ØªÙƒØ±Ø§Ø± Ø¹Ø¨Ø± localStorage. Ø§Ø¹Ø±Ø¶Ù‡Ø§ ÙƒØ±Ø§Ø¨Ø· Ø¹Ø¨Ø± GitHub Pages.",
        pickChapter: "Ø§Ø®ØªØ± Ø§Ù„ÙØµÙ„:",
        numQuestions: "Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©:",
        hint: "ØªÙ„Ù…ÙŠØ­: Ø§Ø³ØªØ®Ø¯Ù… ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø£Ø³ÙÙ„ ÙƒÙ„ Ù…Ù„Ø®Øµ.",
        summaryTitle: "Ù…Ù„Ø®ØµØ§Øª Ø§Ù„ÙØµÙˆÙ„",
        quizTitle: "Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±",
        publishTitle: "Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù†Ø´Ø± ÙƒØ±Ø§Ø¨Ø·",
        publishList: [
          "GitHub Pages: Ø§Ø±ÙØ¹ index.html Ø«Ù… ÙØ¹Ù‘Ù„ Pages Ù…Ù† Settings â†’ Pages.",
          "Netlify: Ø§Ø³Ø­Ø¨ Ø§Ù„Ù…Ù„Ù Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø±Ø§Ø¨Ø· ÙÙˆØ±ÙŠ."
        ],
        footNote: "ÙƒÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø°Ø§ØªÙŠ Ø§Ù„Ø§ÙƒØªÙØ§Ø¡ (HTML/CSS/JS) ÙˆÙ„Ø§ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ù…ÙƒØªØ¨Ø§Øª Ø®Ø§Ø±Ø¬ÙŠØ©.",
        start: "Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±",
        print: "Ø·Ø¨Ø§Ø¹Ø© / PDF",
        reset: "Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø£Ø³Ø¦Ù„Ø©",
        result: "Ø§Ù„Ù†ØªÙŠØ¬Ø©",
        review: "Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª",
        trueTxt: "ØµØ­",
        falseTxt: "Ø®Ø·Ø£",
        check: "ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©",
        explain: "Ø§Ù„Ø´Ø±Ø­: "
      },
      chapters: [
        {
          id:"ch1",
          title:"1) Ù…Ù‚Ø¯Ù…Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø£Ù„ØºØ§Ù… ÙˆØ§Ù„Ø°Ø®Ø§Ø¦Ø± ØºÙŠØ± Ø§Ù„Ù…Ù†ÙØ¬Ø±Ø©",
          summary:"ØªØ·ÙˆÙ‘Ø± Ø§Ù„Ø£Ù„ØºØ§Ù… ÙˆØ¢Ù„ÙŠØ§Øª Ø§Ù„ØªÙØ¹ÙŠÙ„ ÙˆØ§Ù„ØªÙ…ÙŠÙŠØ² Ø¨ÙŠÙ† Ø§Ù„Ø£Ù„ØºØ§Ù… ÙˆUXO ÙˆØ§Ù„Ø°Ø®Ø§Ø¦Ø± Ø§Ù„Ø¹Ù†Ù‚ÙˆØ¯ÙŠØ©.",
          references:["Ø§Ù„ÙÙ‡Ø±Ø³: Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©ØŒ Ø¢Ù„ÙŠØ§Øª Ø§Ù„ØªÙØ¹ÙŠÙ„ØŒ Ø§Ù„Ù†Ø«Ø± Ø§Ù„Ø¬ÙˆÙŠ/Ø§Ù„Ù…Ø¯ÙØ¹ÙŠ."],
          deep: "ØªÙØµÙŠÙ„Ø§Ù‹: Ø®ØµØ§Ø¦Øµ Ø§Ù„Ø§Ù†ÙØ¬Ø§Ø± Ù…Ù‚Ø§Ø¨Ù„ Ø§Ù„Ø´Ø¸Ø§ÙŠØ§ØŒ Ø§Ù„Ù‚Ø§ÙØ²Ø©ØŒ ÙØ±ÙˆÙ‚ Ø§Ù„Ù…ØµÙ‡Ø±Ø§Øª (Ø¶ØºØ·ØŒ ØªØ­Ø±ÙŠØ± Ø¶ØºØ·ØŒ Ø´Ø¯Ù‘ Ø³Ù„ÙƒØŒ Ù‚Ø±Ø¨)ØŒ ÙˆØ¹ÙŠÙˆØ¨ Ø§Ù„Ù†Ø«Ø± (Ù…Ø¹Ø¯Ù„Ø§Øª ÙØ´Ù„ØŒ Ø£Ø®Ø·Ø§Ø± Ù…Ø§ Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø²Ø§Ø¹).",
          questions:[
            {type:"tf", q:"Bounding mines ØªØ±ÙØ¹ Ù†ÙØ³Ù‡Ø§ Ù„Ù†Ø´Ø± Ø§Ù„Ø´Ø¸Ø§ÙŠØ§.", answer:true, explain:"Ø²ÙŠØ§Ø¯Ø© Ù†ØµÙ Ø§Ù„Ù‚ØªÙ„ ÙˆØ§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø´Ø¸Ø§ÙŠØ§."},
            {type:"mcq", q:"Tripwire ÙŠØ¹Ù†ÙŠ:", options:["Ù…ØµÙ‡Ø± Ø¶ØºØ·","Ø³Ù„Ùƒ Ø¬Ø±","ØªØ£Ø®ÙŠØ± Ø²Ù…Ù†ÙŠ","Ù‚Ø±Ø¨ Ø­Ø±Ø§Ø±ÙŠ"], answerIndex:1, explain:"Ù…ØµÙ‡Ø± ÙŠÙØ³Ø­Ø¨ Ø¨Ø³Ù„Ùƒ."},
            {type:"tf", q:"UXO ØºÙŠØ± Ø®Ø·Ø±Ø© Ù„Ø£Ù†Ù‡Ø§ ÙØ´Ù„Øª ÙÙŠ Ø§Ù„Ø§Ù†ÙØ¬Ø§Ø±.", answer:false, explain:"ØªØ¨Ù‚Ù‰ Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø§Ù†ÙØ¬Ø§Ø±."},
            {type:"mcq", q:"Ø§Ù„Ø°Ø®Ø§Ø¦Ø± Ø§Ù„Ø¹Ù†Ù‚ÙˆØ¯ÙŠØ©:", options:["Ø£Ù„ØºØ§Ù… Ø¨Ø­Ø±ÙŠØ©","Ø­Ù…ÙˆÙ„Ø§Øª ÙØ±Ø¹ÙŠØ© Ù‚Ø¯ ØªØªØµØ±Ù ÙƒØ£Ù„ØºØ§Ù…","Ø¯Ø±ÙˆÙ†Ø§Øª","Ù‚Ø°Ø§Ø¦Ù Ø¯Ø®Ø§Ù†"], answerIndex:1, explain:"ØªÙØ´Ù„ Ø¨Ø¹Ø¶ Ø§Ù„Ø­Ù…ÙˆÙ„Ø§Øª ÙØªØªØ­ÙˆÙ„ Ø¥Ù„Ù‰ Ù…Ø®Ø§Ø·Ø± Ø¯Ø§Ø¦Ù…Ø©."},
            {type:"tf", q:"Ø§Ù„Ø£Ù„ØºØ§Ù… Ø§Ù„Ø¨Ù„Ø§Ø³ØªÙŠÙƒÙŠØ© Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ù„Ø§ ØªÙÙƒØªØ´Ù.", answer:false, explain:"ØºØ§Ù„Ø¨Ù‹Ø§ ØªØ­ÙˆÙŠ Ù…Ø¹Ø¯Ù†Ù‹Ø§ Ø£Ø¯Ù†Ù‰ Ø£Ùˆ ÙŠÙ…ÙƒÙ† ØªØªØ¨Ø¹Ù‡Ø§ Ø¨ÙˆØ³Ø§Ø¦Ù„ Ø£Ø®Ø±Ù‰."}
          ]
        },
        {
          id:"ch2",
          title:"2) Ø§Ù„Ø£Ø«Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø²Ø§Ø¹",
          summary:"Ø§Ù„Ø¥ØµØ§Ø¨Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©ØŒ Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ù‡Ø´Ø©ØŒ Ø£Ø«Ø± ØºÙŠØ± Ù…Ø¨Ø§Ø´Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù‚Ù„ ÙˆØ§Ù„ØµØ­Ø© ÙˆØ§Ù„ØªÙ†Ù…ÙŠØ©.",
          references:["Ø§Ù„ÙÙ‡Ø±Ø³: Direct/Indirect impactØŒ VulnerabilityØŒ Community confidence."],
          deep:"ØªÙØµÙŠÙ„Ø§Ù‹: Ø£Ù†Ù…Ø§Ø· Ø§Ù„Ø¥ØµØ§Ø¨Ø© (Ø¨ØªØ± Ø§Ù†ÙØ¬Ø§Ø±ÙŠ/Ø´Ø¸Ø§ÙŠØ§)ØŒ Ø§Ù„ØªØ£Ø«ÙŠØ± Ø§Ù„Ù†ÙØ³ÙŠØŒ ÙˆØªÙ‚Ø¯ÙŠØ± ØªÙƒÙ„ÙØ© Ø§Ù„ÙØ±ØµØ© Ø§Ù„Ø¶Ø§Ø¦Ø¹Ø© Ù„Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù…Ù‚ÙÙ„Ø©.",
          questions:[
            {type:"tf", q:"Ø§Ù„Ø£Ø·ÙØ§Ù„ Ø¶Ù…Ù† Ø§Ù„Ø£ÙƒØ«Ø± Ù‡Ø´Ø§Ø´Ø©.", answer:true, explain:"Ø³Ù„ÙˆÙƒ Ø§Ø³ØªÙƒØ´Ø§ÙÙŠ ÙˆÙ‚Ù„Ø© ÙˆØ¹ÙŠ."},
            {type:"mcq", q:"Ø£Ø«Ø± ØºÙŠØ± Ù…Ø¨Ø§Ø´Ø±:", options:["Ø¨ØªØ± ÙÙˆØ±ÙŠ","Ù†Ø²Ù","ØªØ¹Ø·Ù„ Ø³Ù„Ø§Ø³Ù„ Ø§Ù„Ø¥Ù…Ø¯Ø§Ø¯","Ø­Ø±ÙˆÙ‚"], answerIndex:2, explain:"ØªØ¹Ø·Ù„ Ø§Ù„Ù†Ù‚Ù„ ÙˆØ§Ù„ØªØ¬Ø§Ø±Ø©."},
            {type:"tf", q:"Ø²ÙˆØ§Ù„ Ø§Ù„Ù„Ø§ÙØªØ§Øª ÙŠÙ‚Ù„Ù„ Ø§Ù„Ø®Ø·Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.", answer:false, explain:"Ù‚Ø¯ ÙŠØ²ÙŠØ¯ Ø§Ù„Ù…Ø®Ø§Ø·Ø±Ø© Ù„Ø§Ù†Ø¹Ø¯Ø§Ù… Ø§Ù„ØªØ­Ø°ÙŠØ±."},
            {type:"mcq", q:"Ù…Ø±ÙÙ‚ ÙŠØªØ£Ø«Ø± Ø·ÙˆÙŠÙ„Ù‹Ø§:", options:["Ø§Ù„Ø­Ø¯Ø§Ø¦Ù‚","Ø§Ù„Ù…ØªØ§Ø­Ù","Ø§Ù„Ù‚Ø·Ø§Ø¹ Ø§Ù„ØµØ­ÙŠ","Ø§Ù„Ù…Ù„Ø§Ø¹Ø¨"], answerIndex:2, explain:"Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„ØµØ­Ø© ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ£Ù‡ÙŠÙ„."},
            {type:"tf", q:"Ø§Ù„Ø¹Ø§Ø¦Ø¯ÙˆÙ† (IDPs/Refugees) ÙŠØªØ¹Ø±Ø¶ÙˆÙ† Ù„Ù…Ø®Ø§Ø·Ø± Ø£Ø¹Ù„Ù‰.", answer:true, explain:"Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø£Ø±Ø§Ø¶Ù Ù…Ù„ÙˆØ«Ø© Ø¯ÙˆÙ† Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ÙƒØ§ÙÙŠØ©."}
          ]
        }
      ]
    };

    const DATA_EN = {
      ui: {
        ideaTitle: "Concept",
        ideaText: "One-page app with chapter summaries and a randomized quiz. Fully bilingual (AR/EN). Questions avoid repetition using localStorage. Publish via GitHub Pages.",
        pickChapter: "Pick chapter:",
        numQuestions: "Questions count:",
        hint: "Tip: expand references under each summary.",
        summaryTitle: "Chapter Summaries",
        quizTitle: "Quiz",
        publishTitle: "Publish as a Link",
        publishList: [
          "GitHub Pages: upload index.html and enable Pages in Settings â†’ Pages.",
          "Netlify: drag-and-drop to get an instant URL."
        ],
        footNote: "Pure HTML/CSS/JS. No external libs.",
        start: "Start Quiz",
        print: "Print / PDF",
        reset: "Reset Questions",
        result: "Result",
        review: "Answer Review",
        trueTxt: "True",
        falseTxt: "False",
        check: "Check Answer",
        explain: "Explain: "
      },
      chapters: [
        {
          id:"en1",
          title:"1) Intro to Landmines & UXO",
          summary:"Evolution of mines; operating modes (blast/frag/bounding); fuzes (pressure, tripwire, pressure-release, proximity); deployment (hand, air, artillery); distinction between mines, UXO, and cluster submunitions.",
          references:["ToC: â€˜An Introductionâ€¦â€™, â€˜Mode of operationâ€™, â€˜Type of activation mechanismâ€™, â€˜Deployment methodâ€™, â€˜Submunitionsâ€™."],
          deep:"Deeper note: why scatterable systems generate long-term risk (arming envelopes, failure modes, self-destruct reliability) and how â€˜area denialâ€™ doctrine shaped design.",
          questions:[
            {type:"tf", q:"A bounding AP mine detonates after jumping to ~1â€“2 m to spread fragments.", answer:true, explain:"It increases lethal radius compared to ground burst."},
            {type:"mcq", q:"Which is a common AP activation?", options:["GPS signal","Body heat","Tripwire","RFID"], answerIndex:2, explain:"Tripwire, pressure, pressure-release, proximity are standard."},
            {type:"tf", q:"UXO are safe because they failed to explode.", answer:false, explain:"They remain hazardous and can detonate when disturbed."},
            {type:"mcq", q:"Cluster munitions are:", options:["Naval mines","Submunitions that may behave like mines when duds","Recon drones","Smoke shells"], answerIndex:1, explain:"Duds become de facto mines."},
            {type:"tf", q:"Minimum-metal mines are always undetectable.", answer:false, explain:"Many still have enough metal or can be detected by other methods."}
          ]
        },
        {
          id:"en2",
          title:"2) Postâ€‘Conflict Impact",
          summary:"Direct trauma patterns; vulnerable groups; community confidence; indirect impacts on health systems, transport, trade, and development paths.",
          references:["ToC: â€˜Postâ€‘conflict Impactâ€™, â€˜The human bodyâ€™, â€˜Vulnerabilityâ€™, â€˜Community confidenceâ€™, â€˜Indirect impactâ€™ sections."],
          deep:"Deeper note: economic opportunity cost of blocked land, psychosocial effects, and comparative burden on emergency vs. rehabilitation care.",
          questions:[
            {type:"tf", q:"Children are among the most atâ€‘risk groups.", answer:true, explain:"Curiosity/play and low risk awareness."},
            {type:"mcq", q:"An indirect impact is:", options:["Immediate amputation","Acute bleeding","Disrupted logistics/transport","Burns"], answerIndex:2, explain:"Transport and trade disruption are indirect effects."},
            {type:"tf", q:"Removing warning signs while hazards remain restores confidence.", answer:false, explain:"It often worsens risk perception and real danger."},
            {type:"mcq", q:"Which sector faces longâ€‘term strain?", options:["Museums","Parks","Health sector","Stadiums"], answerIndex:2, explain:"Rehabilitation and prosthetics raise long-term demand."},
            {type:"tf", q:"Returnees/IDPs typically face elevated exposure.", answer:true, explain:"They traverse contaminated routes and unfamiliar hazards."}
          ]
        }
      ]
    };

    // â€”â€”â€”â€”â€” Ø¹Ù†Ø§ØµØ± DOM â€”â€”â€”â€”â€”
    const langSwitch = document.getElementById('langSwitch');
    const modeBadge = document.getElementById('modeBadge');
    const chapterSelect = document.getElementById('chapterSelect');
    const numQuestions = document.getElementById('numQuestions');
    const summariesEl = document.getElementById('summaries');
    const quizBox = document.getElementById('quizBox');
    const resultBox = document.getElementById('resultBox');
    const startQuizBtn = document.getElementById('startQuiz');
    const printBtn = document.getElementById('printBtn');
    const resetBtn = document.getElementById('resetBtn');

    // UI labels
    const ideaTitle = document.getElementById('ideaTitle');
    const ideaText = document.getElementById('ideaText');
    const pickChapterLabel = document.getElementById('pickChapterLabel');
    const numQLabel = document.getElementById('numQLabel');
    const hintText = document.getElementById('hintText');
    const summaryTitle = document.getElementById('summaryTitle');
    const quizTitle = document.getElementById('quizTitle');
    const publishTitle = document.getElementById('publishTitle');
    const publishList = document.getElementById('publishList');
    const footNote = document.getElementById('footNote');
    const creditLine = document.getElementById('creditLine');

    // â€”â€”â€”â€”â€” Ù…Ù†Ø·Ù‚ Ø§Ù„Ù„ØºØ© â€”â€”â€”â€”â€”
    let LANG = 'ar';
    function setLang(lang){
      LANG = lang;
      const D = (lang==='ar') ? DATA_AR : DATA_EN;
      // dir / rtl-ltr
      document.documentElement.lang = (lang==='ar'?'ar':'en');
      document.documentElement.dir = (lang==='ar'?'rtl':'ltr');
      modeBadge.textContent = (lang==='ar' ? 'Arabic â€¢ RTL' : 'English â€¢ LTR');
      // labels
      ideaTitle.textContent = D.ui.ideaTitle;
      ideaText.textContent = D.ui.ideaText;
      pickChapterLabel.textContent = D.ui.pickChapter;
      numQLabel.textContent = D.ui.numQuestions;
      hintText.textContent = D.ui.hint;
      summaryTitle.textContent = D.ui.summaryTitle;
      quizTitle.textContent = D.ui.quizTitle;
      publishTitle.textContent = D.ui.publishTitle;
      publishList.innerHTML = D.ui.publishList.map(x=>`<li>${x}</li>`).join('');
      footNote.textContent = D.ui.footNote;
      creditLine.textContent = (lang==='ar'
        ? "Â© ØµÙØ­Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© ØªÙØ§Ø¹Ù„ÙŠØ©. Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ÙØµÙˆÙ„ Ù…Ø¨Ù†ÙŠ Ø¹Ù„Ù‰ ÙÙ‡Ø±Ø³ ÙˆÙÙ‚Ø±Ø§Øª Ù…Ù†: Rae McGrath (2000)."
        : "Â© Interactive educational page. Content derives from the ToC and sections of Rae McGrath (2000).");

      // buttons
      startQuizBtn.textContent = D.ui.start;
      printBtn.textContent = D.ui.print;
      resetBtn.textContent = D.ui.reset;

      // load chapters
      fillChapters();
    }

    langSwitch.addEventListener('change', e=> setLang(e.target.value));

    // â€”â€”â€”â€”â€” ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù…Ù„Ø®ØµØ§Øª + Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© â€”â€”â€”â€”â€”
    function fillChapters(){
      const D = (LANG==='ar') ? DATA_AR : DATA_EN;
      chapterSelect.innerHTML='';
      summariesEl.innerHTML='';
      D.chapters.forEach(ch=>{
        const opt = document.createElement('option');
        opt.value = ch.id;
        opt.textContent = ch.title;
        chapterSelect.appendChild(opt);

        const details = document.createElement('details');
        const summary = document.createElement('summary');
        summary.innerHTML = `<b>${ch.title}</b>`;
        const p = document.createElement('p'); p.textContent = ch.summary;
        const deep = document.createElement('p'); deep.className='small'; deep.textContent = (ch.deep || '');
        const refs = document.createElement('div');
        refs.className='small';
        refs.innerHTML = '<div class="hr"></div><b>References:</b><ul>'+ (ch.references||[]).map(r=>`<li>${r}</li>`).join('') +'</ul>';
        details.appendChild(summary);details.appendChild(p); if(ch.deep) details.appendChild(deep); details.appendChild(refs);
        summariesEl.appendChild(details);
      });
      if(D.chapters[0]) chapterSelect.value = D.chapters[0].id;
    }

    // â€”â€”â€”â€”â€” Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© â€”â€”â€”â€”â€”
    function shuffle(arr){return arr.map(v=>[Math.random(),v]).sort((a,b)=>a[0]-b[0]).map(v=>v[1])}
    function pickWithoutRepeats(all, count, cacheKey){
      const key = 'asked_'+LANG+'_'+cacheKey;
      const asked = JSON.parse(localStorage.getItem(key) || '[]');
      const idxs = Array.from({length: all.length}, (_,i)=>i).filter(i=>!asked.includes(i));
      let chosen = [];
      if (idxs.length >= count){
        chosen = shuffle(idxs).slice(0,count);
      } else {
        chosen = idxs.concat(shuffle(Array.from({length: all.length}, (_,i)=>i)).slice(0, count-idxs.length));
        localStorage.setItem(key, JSON.stringify([]));
      }
      const newAsked = JSON.parse(localStorage.getItem(key) || '[]').concat(chosen);
      localStorage.setItem(key, JSON.stringify([...new Set(newAsked)]));
      return chosen.map(i=>({idx:i, data:all[i]}));
    }

    function renderQuiz(chapterId, count){
      const D = (LANG==='ar') ? DATA_AR : DATA_EN;
      const ch = D.chapters.find(c=>c.id===chapterId) || D.chapters[0];
      quizBox.innerHTML=''; resultBox.style.display='none';

      const picked = pickWithoutRepeats(ch.questions, count, ch.id);
      let score=0, answered=0;
      const review=[];

      picked.forEach((entry, qi)=>{
        const qwrap = document.createElement('div'); qwrap.className='q';
        const qh = document.createElement('h4'); qh.textContent = `${LANG==='ar'?'Ø³':''}${qi+1}: ${entry.data.q}`;
        const ops = document.createElement('div'); ops.className='options';

        if(entry.data.type==='tf'){
          const labels = [ (LANG==='ar'?DATA_AR.ui.trueTxt:DATA_EN.ui.trueTxt), (LANG==='ar'?DATA_AR.ui.falseTxt:DATA_EN.ui.falseTxt) ];
          [true,false].forEach((val, oi)=>{
            const opt = document.createElement('label'); opt.className='opt';
            const input = document.createElement('input'); input.type='radio'; input.name='q'+qi; input.value=String(val);
            const span = document.createElement('span'); span.textContent = labels[oi];
            opt.appendChild(input); opt.appendChild(span); ops.appendChild(opt);
          });
        }else{
          shuffle(entry.data.options.map((t,i)=>({t,i}))).forEach(({t,i})=>{
            const opt = document.createElement('label'); opt.className='opt';
            const input = document.createElement('input'); input.type='radio'; input.name='q'+qi; input.value=i;
            const span = document.createElement('span'); span.textContent = t;
            opt.appendChild(input); opt.appendChild(span); ops.appendChild(opt);
          });
        }

        const explain = document.createElement('div'); explain.className='explain'; explain.style.display='none';

        const submit = document.createElement('button'); submit.className='btn secondary';
        submit.textContent = (LANG==='ar'?DATA_AR.ui.check:DATA_EN.ui.check);

        submit.addEventListener('click', ()=>{
          const selected = qwrap.querySelector('input[type="radio"]:checked');
          if(!selected){ alert(LANG==='ar'?'Ø§Ø®ØªØ± Ø¥Ø¬Ø§Ø¨Ø© Ø£ÙˆÙ„Ù‹Ø§':'Pick an option first'); return; }
          let correct=false;
          if(entry.data.type==='tf'){
            correct = (String(entry.data.answer) === selected.value);
          }else{
            correct = (Number(selected.value) === Number(entry.data.answerIndex));
          }
          qwrap.querySelectorAll('label.opt').forEach(l=>l.classList.remove('correct','wrong'));
          if(correct){ selected.parentElement.classList.add('correct'); score++; } 
          else { selected.parentElement.classList.add('wrong'); if(entry.data.type==='mcq'){ const right = Array.from(qwrap.querySelectorAll('input')).find(inp=>Number(inp.value)===Number(entry.data.answerIndex)); if(right) right.parentElement.classList.add('correct'); } }
          explain.style.display='block';
          explain.textContent = (LANG==='ar'?DATA_AR.ui.explain:DATA_EN.ui.explain) + (entry.data.explain||'');
          submit.disabled=true; answered++; review.push({q:entry.data.q, correct, explain:entry.data.explain||''});
          if(answered===picked.length) showResult();
        });

        qwrap.appendChild(qh); qwrap.appendChild(ops); qwrap.appendChild(explain);
        qwrap.appendChild(document.createElement('div')).className='hr';
        qwrap.appendChild(submit);
        quizBox.appendChild(qwrap);
      });

      function showResult(){
        resultBox.style.display='block';
        const pct = Math.round((score/picked.length)*100);
        resultBox.innerHTML = `
          <h3>${LANG==='ar'?DATA_AR.ui.result:DATA_EN.ui.result}</h3>
          <div class="scorebox">
            <span class="pill">${LANG==='ar'?'Ø§Ù„ØµØ­ÙŠØ­':'Correct'}: ${score}</span>
            <span class="pill">${LANG==='ar'?'Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ':'Total'}: ${picked.length}</span>
            <span class="pill">${LANG==='ar'?'Ø§Ù„Ù†Ø³Ø¨Ø©':'Percent'}: ${pct}%</span>
          </div>
          <div class="hr"></div>
          <details open><summary>${LANG==='ar'?DATA_AR.ui.review:DATA_EN.ui.review}</summary>
            <ol>
              ${review.map(r=>`<li>${r.q}<br><span class="small">${r.correct ? 'âœ…' + (LANG==='ar'?' ØµØ­ÙŠØ­':' Correct') : 'âŒ' + (LANG==='ar'?' Ø®Ø·Ø£':' Wrong')}</span><br><span class="small">${r.explain}</span></li>`).join('')}
            </ol>
          </details>
        `;
      }
    }

    // â€”â€”â€”â€”â€” Ø£Ø­Ø¯Ø§Ø« â€”â€”â€”â€”â€”
    startQuizBtn.addEventListener('click', ()=>{
      const chapterId = chapterSelect.value;
      const count = Math.max(1, Math.min(parseInt(numQuestions.value||'8',10), 25));
      renderQuiz(chapterId, count);
      window.scrollTo({top: document.body.scrollHeight, behavior:'smooth'});
    });
    printBtn.addEventListener('click', ()=>window.print());
    resetBtn.addEventListener('click', ()=>{
      if(confirm(LANG==='ar'?'Ù…Ø³Ø­ Ø³Ø¬Ù„ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©ØŸ':'Clear asked-questions history?')){
        ['ar','en'].forEach(l=>{ 
          const D = (l==='ar')?DATA_AR:DATA_EN; 
          D.chapters.forEach(ch=>localStorage.removeItem('asked_'+l+'_'+ch.id));
        });
        alert(LANG==='ar'?'ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø·.':'Reset done.');
      }
    });

    // init
    setLang('ar');
    langSwitch.value='ar';
  </script>
</body>
</html>
